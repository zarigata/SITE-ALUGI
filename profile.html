<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil - Alugi</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- 
    F3V3R DR34M KEYGEN STYLE COMMENT: 
    ULTIMATE USER PROFILE DOMINATION V2.0
    CODED WITH THE POWER OF 1337 H4X0R SKILLS
    MAXIMUM PROFILE CUSTOMIZATION ENABLED
    -->
    <div id="app">
        <header>
            <nav>
                <div class="logo">Alugi</div>
                <ul class="nav-links">
                    <li><a href="index.html">Início</a></li>
                    <li><a href="#dashboard">Dashboard</a></li>
                    <li><a href="#my-items">Meus Itens</a></li>
                    <li><a href="#post-item">Postar Item</a></li>
                </ul>
                <div class="auth-buttons">
                    <button class="login">Perfil</button>
                    <button class="signup">Sair</button>
                </div>
            </nav>
        </header>

        <main class="profile-page">
            <section class="profile-hero">
                <div id="profile-cover" class="profile-cover">
                    <button class="edit-cover" onclick="document.getElementById('cover-upload').click()">
                        <i class="fas fa-camera"></i> Alterar Capa
                    </button>
                    <input type="file" id="cover-upload" accept="image/*" style="display: none;">
                </div>
                <div class="profile-header container">
                    <div class="profile-avatar">
                        <img id="avatar-img" src="assets/default-avatar.png" alt="Foto de Perfil">
                        <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                        <button onclick="document.getElementById('avatar-upload').click()" class="edit-avatar">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-info">
                        <h1 id="user-name"></h1>
                        <p id="join-date"></p>
                        <div class="profile-stats">
                            <div class="stat">
                                <span id="items-count">0</span>
                                <label>Itens</label>
                            </div>
                            <div class="stat">
                                <span id="rentals-count">0</span>
                                <label>Aluguéis</label>
                            </div>
                            <div class="stat">
                                <span id="rating">5.0</span>
                                <label>Avaliação</label>
                            </div>
                        </div>
                    </div>
                    <button class="edit-profile-btn" onclick="window.AlugiProfile.toggleEditProfile()">Editar Perfil</button>
                </div>
            </section>

            <div class="profile-content container">
                <!-- Sidebar Navigation -->
                <div class="profile-sidebar">
                    <nav class="profile-nav">
                        <a href="#" class="active" data-section="dashboard">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                        <a href="#" data-section="items">
                            <i class="fas fa-box"></i> Meus Itens
                            <span class="badge" id="items-badge">0</span>
                        </a>
                        <a href="#" data-section="rentals">
                            <i class="fas fa-shopping-cart"></i> Meus Aluguéis
                            <span class="badge" id="rentals-badge">0</span>
                        </a>
                        <a href="#" data-section="messages">
                            <i class="fas fa-envelope"></i> Mensagens
                            <span class="badge" id="messages-badge">0</span>
                        </a>
                        <a href="#" data-section="settings">
                            <i class="fas fa-cog"></i> Configurações
                        </a>
                    </nav>

                    <div class="profile-completion">
                        <h3>Completude do Perfil</h3>
                        <div class="progress-bar">
                            <div class="progress" id="profile-completion-progress" style="width: 0%"></div>
                        </div>
                        <ul class="completion-tasks" id="profile-completion-tasks">
                            <li class="done">
                                <i class="fas fa-check"></i> Foto de Perfil
                            </li>
                            <li>
                                <i class="fas fa-times"></i> Informações Pessoais
                            </li>
                            <li>
                                <i class="fas fa-times"></i> Primeiro Item Postado
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="profile-main">
                    <!-- Dashboard Section -->
                    <div id="dashboard-section" class="dashboard-section">
                        <div class="section-header">
                            <h2>Meu Dashboard</h2>
                        </div>
                        <div class="dashboard-grid">
                            <div class="dashboard-card">
                                <h3>Ganhos Totais</h3>
                                <div class="amount" id="total-earnings">R$ 0,00</div>
                                <div class="trend positive">
                                    <i class="fas fa-arrow-up"></i> 12.5% este mês
                                </div>
                            </div>
                            <div class="dashboard-card">
                                <h3>Aluguéis Ativos</h3>
                                <div class="amount" id="active-rentals">0</div>
                                <div class="trend">
                                    <i class="fas fa-minus"></i> Sem alterações
                                </div>
                            </div>
                            <div class="dashboard-card">
                                <h3>Últimas Avaliações</h3>
                                <div class="rating">
                                    5.0 <span>(0 avaliações)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Items Section -->
                    <div id="items-section" style="display: none;">
                        <div class="section-header">
                            <h2>Meus Itens</h2>
                            <button class="add-item-btn" onclick="showPostItemModal()">
                                <i class="fas fa-plus"></i> Adicionar Item
                            </button>
                        </div>
                        <div class="items-filters">
                            <button class="active" data-filter="todos">Todos</button>
                            <button data-filter="disponivel">Disponíveis</button>
                            <button data-filter="alugado">Alugados</button>
                        </div>
                        <div id="items-grid" class="items-grid">
                            <!-- Items will be dynamically populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Cover Upload Modal -->
        <div id="cover-upload-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Alterar Foto de Capa</h2>
                    <button class="close-modal" onclick="closeCoverUploadModal()">&times;</button>
                </div>
                <div class="image-upload-area">
                    <input type="file" id="cover-image-input" accept="image/*" style="display: none;">
                    <button onclick="document.getElementById('cover-image-input').click()">
                        <i class="fas fa-upload"></i>
                        <p>Clique para selecionar uma imagem</p>
                        <span>Tamanho máximo: 5MB</span>
                    </button>
                    <div id="cover-image-preview" class="image-preview"></div>
                </div>
                <div class="form-buttons">
                    <button class="cancel-btn" onclick="closeCoverUploadModal()">Cancelar</button>
                    <button class="save-btn" onclick="saveCoverImage()">Salvar</button>
                </div>
            </div>
        </div>

        <!-- Edit Profile Modal -->
        <div id="edit-profile-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Editar Perfil</h2>
                    <button class="close-modal" onclick="toggleEditProfile()">&times;</button>
                </div>
                <form id="edit-profile-form">
                    <div class="input-group">
                        <label for="edit-name">Nome Completo</label>
                        <input type="text" id="edit-name" required>
                    </div>
                    <div class="input-group">
                        <label for="edit-email">Email</label>
                        <input type="email" id="edit-email" required>
                    </div>
                    <div class="input-group">
                        <label for="edit-phone">Telefone</label>
                        <input type="tel" id="edit-phone" placeholder="(XX) XXXXX-XXXX">
                    </div>
                    <div class="input-group">
                        <label for="edit-bio">Biografia</label>
                        <textarea id="edit-bio" rows="4" placeholder="Conte um pouco sobre você..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="edit-location">Localização</label>
                        <input type="text" id="edit-location" placeholder="Cidade, Estado">
                    </div>
                    <div class="form-buttons">
                        <button type="button" class="cancel-btn" onclick="toggleEditProfile()">Cancelar</button>
                        <button type="submit" class="save-btn">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Post Item Modal -->
        <div id="post-item-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Postar Novo Item</h2>
                    <button class="close-modal" onclick="hidePostItemModal()">&times;</button>
                </div>
                <form id="post-item-form">
                    <div class="input-group">
                        <label for="item-name">Nome do Item</label>
                        <input type="text" id="item-name" required>
                    </div>
                    <div class="input-group">
                        <label for="item-description">Descrição</label>
                        <textarea id="item-description" required></textarea>
                    </div>
                    <div class="input-group">
                        <label for="item-category">Categoria</label>
                        <select id="item-category" required>
                            <option value="">Selecione uma categoria</option>
                            <option value="Ferramentas">Ferramentas</option>
                            <option value="Equipamentos de Festa">Equipamentos de Festa</option>
                            <option value="Eletrônicos">Eletrônicos</option>
                            <option value="Esportes">Esportes</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="daily-rate">Valor da Diária (R$)</label>
                        <input type="number" id="daily-rate" step="0.01" required>
                    </div>
                    <div class="input-group">
                        <label for="item-images">Fotos do Item</label>
                        <div class="image-upload-area" onclick="document.getElementById('item-images').click()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Clique ou arraste imagens aqui</p>
                            <span>Máximo 5 imagens</span>
                        </div>
                        <input type="file" id="item-images" multiple accept="image/*" hidden>
                        <div id="image-preview" class="image-preview"></div>
                    </div>
                    <div class="form-buttons">
                        <button type="button" class="cancel-btn" onclick="hidePostItemModal()">Cancelar</button>
                        <button type="submit" class="save-btn">Publicar Item</button>
                    </div>
                </form>
            </div>
        </div>

        <footer>
            <div class="footer-content">
                <div class="footer-logo">Alugi</div>
                <div class="footer-links">
                    <a href="terms.html">Termos de Uso</a>
                    <a href="privacy.html">Política de Privacidade</a>
                    <a href="help.html">Ajuda</a>
                </div>
                <div class="social-links">
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <div class="copyright">
                &copy; 2025 Alugi. Todos os direitos reservados.
            </div>
        </footer>
    </div>

    <script>
        // Cover image upload modal functions
        function showCoverUploadModal() {
            document.getElementById('cover-upload-modal').classList.add('active');
        }

        function closeCoverUploadModal() {
            document.getElementById('cover-upload-modal').classList.remove('active');
        }

        function saveCoverImage() {
            const fileInput = document.getElementById('cover-image-input');
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const profileCover = document.getElementById('profile-cover');
                    profileCover.style.backgroundImage = `url(${e.target.result})`;
                    
                    // Save to localStorage or send to backend
                    const currentUser = JSON.parse(localStorage.getItem('alugi_current_user') || '{}');
                    currentUser.coverImage = e.target.result;
                    localStorage.setItem('alugi_current_user', JSON.stringify(currentUser));
                    
                    closeCoverUploadModal();
                };
                reader.readAsDataURL(file);
            }
        }

        // Add event listener for cover upload button
        document.getElementById('profile-cover').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                showCoverUploadModal();
            }
        });
    </script>

    <script src="data.js"></script>
    <script src="auth.js"></script>
    <script src="profile.js"></script>
</body>
</html>
